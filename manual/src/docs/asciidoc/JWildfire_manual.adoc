:doctype: book
:sectnums:
:sectnumlevels: 5
:toc:
:toclevels: 3

# JWildfire users manual

## Introduction

## Main Editor

[.thumb]
image::main_editor_with_regions.jpg[scaledwidth=75%]
The Main Editor is the core part of JWildfire.
Here you create random flames or fine-tune your artworks.
It consists of the following parts:

 . Preview/Editor Area
 . Thumbnail ribbon
 . Transformations and Scripts
 . Flame settings
 . Global functions

You find a description of each part as separate sub-chapter in this manual.

### Preview/Editor area
This area is both for previewing fractals and editing them in realtime.
The most simple and intuitive way to edit a fractal is to drag or rotate one of the
visible controls on top of the fractals (usually in the shape of triangles).
But, there also much more precise ways and lots of other options to manipulate a flame-fractal.

#### Quick buttons on the top of the preview area
This buttons primarily control the previewing/editing options.

##### _Display/hide variation effect_
Displays the contribution of the currently selected transformation (in the Transformations-area) in the form of a transformed grid.
For example, if the current transformation is a rotation, it will show a rotated grid.
If there are nonlinear transformations (=variations or "plugins"), then the displayed grid may change/deform much more.

##### _Display/hide transparency_
Switch preview-rendering with transparent background on or off.
Please note, that this only affects the preview display and does not the transparency setting of the flame itself.

##### _Fine edit_
Turn on or off "fine editing". Fine editing means that changes are less sensitive to changes using mouse or touchpad to allow editing with a higher grade of detail.

##### _Realtime_
Turns progressive rendering of the preview on or off. Progressive rendering means that the image starts to render in very low quality and gets improved after a while.
This image gets improved after a while again, and so on. Usually this works very good and allows a very fluid editing.
On slower machines (e.g. notebooks) this may cause a heavy load and on some fractals it may cause flickering.
Turning it off causes to render previews at lower and constant (non-progressive) quality level.

##### _Turn grid on/off_
Tuns on or off a grid which may help to align controls

##### _Turn guides on/off_
Turns on or off "artistic guides" for

 - center point
 - rule of thirds
 - golden ratio

which may help to find the right camera position/view.

##### _Style of editor controls_
You may select one of the following style of editor-controls:

 - axis
 - crosshair
 - rectangle
 - triangle (default)
 - hidden

##### _Toggle monochrome/colored controls_
Per default each control is dran in its own color to make them more distinguishable.
Sometimes this may distract you from the fractal. Using this option, you may switch
to a less intrusive monochrome display of controls.

##### _Toggle post transform_
Quick-switch to toggle between editing of the affine-post-transform and the regular affine transform.

Longer explanation: Transformations are executed in the following order:

 . affine transform
 . nonlinear transforms
 . affine post-transform

In the preview area you may either edit the affine transform or the post-affine-transform
by moving the visual controls with the mouse or touchpad.
This button is to switch easily between this two options.

#### Quick buttons on the right of the preview area
This buttons primarily control the type of editing and refreshing the preview.


##### _Enable view editing mode_
In this mode you change the camera settings (=view) when dragging the mouse.

 - using the mouse-wheel, you may zoom in/out.
 - by dragging the mouse with the left mouse-button pressed, you move the camera.
 - by dragging the mouse with the right mouse-button pressed, you rotate the camera.

##### _Move triangles mode_
In this mode you edit the affine or post-affine transformation when dragging the mouse.

- using the mouse-wheel, you may scale up/down.
- by dragging the mouse with the left mouse-button pressed, you move the control, causing a translation
- by dragging the mouse with the right mouse-button pressed, you rotate the control, causing a rotation.

##### _Rotate triangles mode_
This mode is similar to _Move triangles mode_, but you are restricted to rotations.
The rotation is done by dragging the mouse while pressing the left mouse-button.

##### _Scale triangles mode_
This mode is similar to _Move triangles mode_, but you are restricted to scale up/down.
This operation is done by dragging the mouse while pressing the left mouse-button.

##### _Enable free point editing_
In this mode you may freely edit the affine transform by dragging the three corner points
of the triangle-controls.
This way you can get easily create a fre combination of translation, rotation and shear.

##### _Edit view of the controls_
In this mode you edit the appearance of the controls.

- using the mouse-wheel, or by dragging the mouse with the right mouse-button pressed, you may scale them up/down.
- by dragging the mouse with the left mouse-button pressed, you move the controls

##### _Edit focus point_
Edit the focus-point (parameters FocusX, FocusY and FocusZ at the "DOF/Bokeh -> DOF" - tab)
using the mouse

- by dragging the mouse with the left mouse-button pressed, you change FocusX- and FocusY-parameters
- using the mouse-wheel you change the FocusZ-parameter

##### _Affine XY edit plane_
Sets the current editing-plane for editing affine-transform to the x-y-plane.

The editing of affine-transforms takes place in one plane, the default setting is the x-y-plane.
When editing "classic" 2d-fractals, the x-y-plane is the only plane.
But, when editing 3d-fractals, you may choose different planes, in order to modify all three coordinates.


##### _Affine YZ edit plane_
Sets the current editing-plane for editing affine-transform to the y-z-plane.

##### _Affine ZX edit plane_
Sets the current editing-plane for editing affine-transform to the z-x-plane.

##### _AI Denoiser preview_
Apply the currently selected AI denoiser (OptiX or OIDN) and display it in the preview.
This function uses a splitted preview, in order to allow to compare the denoised and the original image.
On the left side, you see the original image, on the right side of the splitting-indicator you
see the denoised image.

This function uses the current preview. So it is often recommended to re-render the preview in
higher quality before invoking it.

##### _External render preview_
Open an additional detached progressive preview, works especially well when you are using two monitors.

##### _Render image preview_
Re-renders the current preview with a much higher quality level.
This is a very important function in the fractal-editing workflow, because certain parameter changes
do not cause a complete re-render of the complete image, because this would be too slow.
Instead they use a raw in-memory-version of the latest preview and apply the parameter-change to it.

So, especially when fine-tuning colors it is recommended to re-render the preview in higher quality
using this button, before changing the settings.
Because this function is such important it is at this prominent place.

#### Quick buttons on the left of the preview area

##### _Interactive renderer_
This is just a shortcut for the Interactive Renderer. It opens it or brings it into foreground.
It does does nothing else, e.g. not to load the current flame into the Interactive Renderer. This is intended.

##### _Easy Movie Maker_
Opens the Easy Movie Maker.
Automatically adds the currently loaded flame as first keyframe inside the Easy Movie Maker when
there is no keyframe yet.

##### _Flame Browser_
Opens the Flame Browser.

##### _Undo_
Reverts the latest change to the currently selected flame.
Each flame has its own undo-history. So undoing a change will never switch between flames.

Please note, that the undo history is not saved together whith flames, so it is lost when
you quit JWildfire.

##### _Redo_
Repeats the latest undone change to the currently selected flame.

##### _SShot (Snapshot)_
Create a snapshot of the current flame. This is an identical copy with new undo-history.

##### _Title_
Sets the title of the current flame. This is a common place to also put copyright information
or to add your name (as the author of the artwork).

##### _3D_
Switch between "classic" rendering and experimental solid rendering.

Solid rendering basically works by "remembering" each sample of the flame-fractal
as a solid particle.
The sum of all of these particles make up a larger solid shape.
This works only good for a certain types of flame fractals.
It may fail if the structure is too thin or is in general too "chaotic" or too blurry.
But, it can be used to create really unusual and interesting things.
Even to render the "classic" Mandelbulb (thanks to Whittaker Courtney for the idea):

[.thumb]
image::jwf_mandelbulb.jpg[scaledwidth=75%]

##### _Animations controls on/off_
Using this button you may quickly turn on or off animation controls on the fly.
You may set up your preference for this setting in the Preferences-window.

### Thumbnail ribbon

### Flame settings
#### _Camera_ tab
With this controls you can control the camera-view. You can rotate and move the camera freely and zoom in/out.

"Classic" flame fractals are flat (2D) and can not be rotated in space. Basically the parameters Roll, CentreX, CentreY and Zoom/Pixels per unit apply to them.
For 3D fractals there are a lot of more controls.

But, you can "mix" them, of course. So you can apply all parameters to any fractal and also rotating a 2D flame in space or apply a perspectiv distortion to it.  

##### _Roll_
Camera roll angle in degrees. Rotates around the virtual z-axis and also applies to 2D fractals.  

##### _Pitch_
Camera pitch angle in degrees.  

##### _Yaw_
Camera yaw angle in degrees.

##### _Bank_
Camera bank angle in degrees.

##### _Perspective_
Camera perspective. A value of 0 means no perspective, while higher value get more dramatic perspective effects. Can even be negative for more intersting effects.

##### _CentreX_
Offset (translation) of the fractal x-direction. 

##### _CentreY_
Offset (translation) of the fractal y-direction.

##### _Zoom_
Camera zoom.

##### _Pixels per unit_
Another (classic) measure of zoom. "Pixels per unit" means how many pixels are needed to fill a numerical distance of 1.0 (in fractal coordinates). The higher the value, the more details (like zooming in).   

##### _CamPosX_
Position of the camera in x-direction. Has a similar effect like CentreX for 2D fractals, but not for 3D-fractals. 

##### _CamPosY_
Position of the camera in y-direction. Has a similar effect like CentreY for 2D fractals, but not for 3D-fractals.

##### _CamPosY_
Position of the camera in z-direction.

#### _DOF/Bokeh_ tab
DOF (depth of field) is a kind of controversy topic in flame-fractals. Some people like it a lot (including myself),
some people do not like it at all. So, this sub-chapter describes a rather "special" topic.
Bokeh is some kind of art which utilizes DOF to achieve certain artistic effects (using a real camera).
Some typical types of bokeh-effects you may also simulate with JWildfire.

##### _DOF_ subtab
This tab contains some of the more basic settings regarding to DOF.

###### _New DOF_
Switches between classic and more sophisticated (="new") DOF mode.
Usually, the "new mode" is recommended. The classic mode is still ther because of backwards compatibility.

###### _Amount_
Amount of DOF. A value of zero means no DOF at all

###### _Area_
Measure of the sharp area around the focus point

###### _Exponent_
Measure of the fallof of the sharp area around the focus point

###### _Camera dist_
Only applies to the classic mode and is a measure of the distance of the camera to the focus point

###### _FocusX_
X-position of the focus point (point which is sharp). May also be edited interactively in the preview area.

###### _FocusY_
Y-position of the focus point (point which is sharp). May also be edited interactively in the preview area.

###### _FocusZ_
Z-position of the focus point (point which is sharp). May also be edited interactively in the preview area.

##### _Bokeh_ subtab
At this tab you can select options to create bokeh-like styles of DOF-effects

###### _Shape_
Selects the shape of the bokeh-effect

 - Bubble: the typical and default shape
 - Cannabiscurve: some nice-looking organic shape
 - Cloverleaf
 - Flower
 - Heart: little hearts, makes nice Valentine-cards
 - NBlur: has some interesting options to create very different shapes
 - Perlin Noise: some unusual but interesting style
 - Rect: very simple but effective style. You can also create "rain"-like scenes with this
 - SineBlur: some popular circular bokeh
 - StarBlur: tiny stars
 - Taurus: some other unusual, but interesting shape
 - Snowflake: a complex snowflake, created wtih the algorithm described in the
paper "A local cellular model for snow crystal growth" by Clifford A. Reiter.
 - SubFlame: This is the most versatile option: You may use any other fractal as bokeh-style.

###### _Scale_
Global scale of the bokeh-shapes

###### _Rotate_
Global rotation-angle of the bokeh-shapes

###### _Fade_
Global falloff of the bokeh-shapes

###### _Shape specific parameters_
Depending on the bokeh-shape, there are additional parameters.
Most of them are the same as in the variation of the same name. E.g. the "Taurus"-bokeh-style has a
parameter N (which is the number of corners). The "taurus"-variation has the same parameter.
Not all parameters of a variation are exposed to the bokeh-style of the same name.

###### Flame (for the Sub-Flame-bokeh-style)
By this important parameter you select the flame you want to use as bokeh-style.
It is a number, starting with 1. BEfore you can use a flame as bokeh-style you must save it to your default
flame-folder by using a filename in the form "_dof_XXXX.flame", where XXXX corresponds to the number
you select here.
For example, when you enter "23" as parameter Flame, JWildfire will look for a flame-file with the
filename _dof_0023.flame.


##### _Post bokeh_ subtab
###### _Bokeh intensity_
###### _Bokeh size_
###### _Bokeh filter kernel_
###### _Bokeh brightness_
###### _Bokeh activation_

##### _Post blur_ subtab
###### _Blur radius_
###### _Blur fade_
###### _Blur falloff_

##### _ZBuffer_ subtab
###### _ZBuffer scale_
###### _ZBuffer bias_
###### _ZBuffer filename_



#### _Coloring_ tab
##### _Brightness_
##### _Low brightness_
##### _Gamma_
##### _Gamma threshold_
##### _Contrast_
##### _Red balance_
##### _Green balance_
##### _Blue balance_
##### _Fade to White_
##### _Vibrancy_
##### _Saturation_
##### _Bg color_
##### _Bg image_
##### _Fg opacity_
##### _Background transparency_

#### _Anti-Aliasing / Filter_ tab

### Transformations and Scripts

### Global functions

##### Random batch

##### Rnd flame-generator

##### Rnd Symmetry

##### Rnd Gradient

##### Rnd WField

##### New from scratch

##### From clipboard

##### Load flame

##### To clipboard

##### Save flame

##### Q (Quicksave)

##### A (Save all)

##### Render image

##### Render resolution

##### Edit resolution profiles

##### Render quality

##### Edit quality profiles

##### Batch renderer


## Platform-specific topics (Windows, Mac, Steam, ...)


## Interactive Renderer

## Batch renderer

## Preferences

## Flame Browser

## MutaGen
In this module you may create mutations of a certain flame in an interactive way.

There are several mutation types affecting different "genes" (types of flame properties).
Those mutations are applied at two levels: generation A (8 new fractals from the base flame)
and generation B (16 new fractals from generation A), generating total 24 new flames at each mutation step.

You can easily exchange fractals between the main editor and the new module at any time.

There is also a history, i.e. you can navigate back to earlier generations at any time.

## Quilt Renderer
The Quilt Renderer allows you to render flames in nearly unlimited size.
This works by splitting the whole image into tiles.

You may freely specify how the tiles are generated, e.g. splitting the image in 3x2 tiles or 8 vertical stripes.

Each of the rendered tiles is a valid image. So, even if JWildfire would finally fail to assemble the tiles into one
final image (due to memory restrictions), you could perform this step using external image-processing-software,
which is more optimized to handle large images.
Images with a size upto 32K (30720x17280) where tested without any problems so far.

You can cancel/resume the rendering-process at tile-level.

Please note: Due to the nature of the flame-fractal-algorithm, the rendering of each tile may take as long as you
would render the whole image at once. So, this method is not efficient, but effective.
A 16K render on a modern computer can take about 12 hours, but you will usually get an awesome
result with endless details.

## FAQ (frequently asked questions)
Here are answers to some popular questions I get often, which do not fit into the other chapters.

### Are 4k renders possible?
### Can I render images with removed/transparent background?
### How to save a flame as image?


[source,java]
.Java code from project
----
include::{sourcedir}/example/StringUtils.java[tags=contains,indent=0]
----

